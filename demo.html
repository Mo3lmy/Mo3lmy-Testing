<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
    <meta charset="UTF-8">
    <title>Ù…Ù†ØµØ© Ø§Ù„ØªØ¹Ù„ÙŠÙ… - Demo</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-8">
    <div class="max-w-4xl mx-auto">
        <h1 class="text-3xl font-bold mb-8">Ù…Ù†ØµØ© Ø§Ù„ØªØ¹Ù„ÙŠÙ… Ø§Ù„Ø°ÙƒÙŠØ©</h1>
        
        <!-- Login Section -->
        <div class="bg-white p-6 rounded-lg shadow mb-6">
            <h2 class="text-xl font-semibold mb-4">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>
            <button onclick="login()" class="bg-blue-500 text-white px-4 py-2 rounded">
                Ø¯Ø®ÙˆÙ„ ÙƒØ·Ø§Ù„Ø¨ ØªØ¬Ø±ÙŠØ¨ÙŠ
            </button>
            <div id="loginStatus" class="mt-2"></div>
        </div>
        
        <!-- Chat Section -->
        <div class="bg-white p-6 rounded-lg shadow mb-6">
            <h2 class="text-xl font-semibold mb-4">Ø§Ø³Ø£Ù„ Ø§Ù„Ù…Ø¹Ù„Ù… Ø§Ù„Ø°ÙƒÙŠ</h2>
            <input id="question" type="text" 
                   placeholder="Ø§ÙƒØªØ¨ Ø³Ø¤Ø§Ù„Ùƒ Ù‡Ù†Ø§..." 
                   class="w-full p-2 border rounded mb-4">
            <button onclick="askQuestion()" class="bg-green-500 text-white px-4 py-2 rounded">
                Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø³Ø¤Ø§Ù„
            </button>
            <div id="answer" class="mt-4 p-4 bg-gray-50 rounded"></div>
        </div>
        
        <!-- Progress Section -->
        <div class="bg-white p-6 rounded-lg shadow">
            <h2 class="text-xl font-semibold mb-4">Ø§Ù„ØªÙ‚Ø¯Ù… Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ</h2>
            <button onclick="getProgress()" class="bg-purple-500 text-white px-4 py-2 rounded">
                Ø¹Ø±Ø¶ Ø§Ù„ØªÙ‚Ø¯Ù…
            </button>
            <div id="progress" class="mt-4"></div>
        </div>
    </div>
    
    <script>
        let token = '';
        const API = 'http://localhost:3000/api/v1';
        
        async function login() {
            const res = await fetch(`${API}/auth/login`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    email: 'student1@test.com',
                    password: 'Test@1234'
                })
            });
            const data = await res.json();
            token = data.data?.token;
            document.getElementById('loginStatus').innerHTML = 
                'âœ… ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­!';
        }
        
        async function askQuestion() {
            const question = document.getElementById('question').value;
            const res = await fetch(`${API}/chat/message`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${token}`
                },
                body: JSON.stringify({ message: question })
            });
            const data = await res.json();
            document.getElementById('answer').innerHTML = 
                data.data?.message || 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø¬Ø§Ø¨Ø©';
        }
        
        async function getProgress() {
            const res = await fetch(`${API}/student/progress`, {
                headers: { 'Authorization': `Bearer ${token}` }
            });
            const data = await res.json();
            const stats = data.data?.gamification || {};
            document.getElementById('progress').innerHTML = `
                <div class="space-y-2">
                    <p>ğŸ“Š Ø§Ù„Ù†Ù‚Ø§Ø·: ${stats.totalPoints || 0}</p>
                    <p>ğŸ† Ø§Ù„Ù…Ø³ØªÙˆÙ‰: ${stats.level || 1}</p>
                    <p>ğŸ’° Ø§Ù„Ø¹Ù…Ù„Ø§Øª: ${stats.coins || 0}</p>
                    <p>ğŸ”¥ Ø§Ù„Ø³Ù„Ø³Ù„Ø©: ${stats.streak || 0} ÙŠÙˆÙ…</p>
                </div>
            `;
        }
        
        // Auto-login on load
        window.onload = login;
    </script>
</body>
</html>